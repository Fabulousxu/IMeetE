<!-- square.wxml -->
<view style="width:100%">
    <view style="width:100%; height:{{statusBarHeight}}px;"></view>
    <view style="display:flex; width:100%; box-sizing:border-box; height:{{navigationBarHeight}}px; padding-left:32rpx; padding-right:{{navigationBarPaddingRight}}px;">
        <button bindtap="onSearchButton" style="background-color:rgb(0,0,0,0); background-image:url('/image/search-black.png'); background-size:cover; background-position:center; width: 48rpx; height:48rpx; margin:auto; padding:0;"></button>
        <view class='tabbar'>
            <view class="tabbar_item {{swipeIndex==0 ? 'on' : ''}}" data-current='0' bindtap="swichNav">
                <view>关注</view>
            </view>
            <view class="tabbar_item {{swipeIndex==1 ? 'on' : ''}}" data-current='1' bindtap="swichNav">
                <view>同城</view>
            </view>
            <view class="tabbar_item {{swipeIndex==2 ? 'on' : ''}}" data-current='2' bindtap="swichNav">
                <view>发现</view>
            </view>
        </view>
    </view>
</view>
<view class="main-page">
    <swiper current="{{currentTab}}" class="swiper-box" duration="300" bindchange="bindChange" style="overflow-y:hidden" bindscrolltolower="onReachBottom">
        <swiper-item>
            <scroll-view class="subscribe" type="list" scroll-y="{{true}}" style="width:100vw;height:100%">
                <!-- 使用自定义组件post -->
                <user-post id="subscribe-post" bind:postTap="showPostDetail" pageType="关注" category=""></user-post>
            </scroll-view>
        </swiper-item>
        <swiper-item>
            <scroll-view class="city" type="list" scroll-y="{{true}}" style="width:100vw;height:100%" bindscrolltolower="onReachBottom">
                <view class="user">
                    <image class="avator" src="{{user.url}}"></image>
                    <view class="info">
                        <view class="name">{{user.name}}</view>
                        <view class="mbti">{{user.mbti}}</view>
                    </view>
                    <icon class="position"></icon>
                    <view class="place">{{user.place}}</view>
                </view>
                <user-post id="city-post" bind:postTap="showPostDetail" pageType="同城" category=""></user-post>
            </scroll-view>
        </swiper-item>
        <swiper-item>
            <view class="swiper1_top">
                <view class="swiper1_top_item {{itemIndex==0 ? 'on' : ''}}" data-current3='0' bindtap="itemSwich">
                    体育
                </view>
                <view class="swiper1_top_item {{itemIndex==1 ? 'on' : ''}}" data-current3='1' bindtap="itemSwich">
                    游戏
                </view>
                <view class="swiper1_top_item {{itemIndex==2 ? 'on' : ''}}" data-current3='2' bindtap="itemSwich">
                    学习
                </view>
                <view class="swiper1_top_item {{itemIndex==3 ? 'on' : ''}}" data-current3='3' bindtap="itemSwich">
                    旅游
                </view>
            </view>
            <swiper current="{{itemCurrent}}" duration="300" bindchange="swiperItemChange" bindtransition="swiperTrans">
                <swiper-item style="width:100vw;height:100%" bindtouchmove="itemTouchLeftMove" bindtouchend="itemTouchLeftEnd" bindtouchcancel="itemTouchLeftEnd">
                    <scroll-view class="pe" type="list" scroll-y="{{true}}" style="width:100vw;height:100%" bindscrolltolower="onReachBottom">
                        <user-post id="pe-post" bind:postTap="showPostDetail" pageType="发现" category="体育"></user-post>
                    </scroll-view>
                </swiper-item>
                <swiper-item>
                    <scroll-view class="game" style="width:100vw;height:100%" type="list" scroll-y="{{true}}" bindscrolltolower="onReachBottom">
                        <user-post id="game-post" bind:postTap="showPostDetail" pageType="发现" category="游戏"></user-post>
                    </scroll-view>
                </swiper-item>
                <swiper-item>
                    <scroll-view class="study" style="width:100vw;height:100%" type="list" scroll-y="{{true}}" bindscrolltolower="onReachBottom">
                        <user-post id="study-post" bind:postTap="showPostDetail" pageType="发现" category="学习"></user-post>
                    </scroll-view>
                </swiper-item>
                <swiper-item>
                    <scroll-view class="travel" type="list" scroll-y="{{true}}" style="width:100vw;height:100%" bindtouchmove="itemTouchRightMove" bindtouchend="itemTouchRightEnd" bindtouchcancel="itemTouchRightEnd" bindscrolltolower="onReachBottom">
                        <user-post id="travel-post" bind:postTap="showPostDetail" pageType="发现" category="旅游"></user-post>
                    </scroll-view>
                </swiper-item>
            </swiper>
        </swiper-item>
    </swiper>
</view>